<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title>Blank App</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
        integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>

</head>

<body>
    <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-firestore.js"></script>
    <main id="main">
        <div class="container">
            <i class="fas fa-bell label float-right"></i>
            <h1 class="top-head ">Ustawienia powiadomień</h1>
            <hr class="page">
            <div class="form">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input type="checkbox" aria-label="Checkbox for following text input"
                                id="alarmPrzyBezruchu">
                        </div>
                    </div>
                    <input type="text" class="form-control" aria-label="Text input with checkbox"
                        placeholder="Alarm przy bezruchu">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input type="checkbox" aria-label="Checkbox for following text input" id="powiadomienia">
                        </div>
                    </div>
                    <input type="text" class="form-control" aria-label="Text input with checkbox"
                        placeholder="Powiadomienia">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <div class="input-group-text">
                            <input type="checkbox" aria-label="Checkbox for following text input"
                                id="czytaniePowiadomien">
                        </div>
                    </div>
                    <input type="text" class="form-control" aria-label="Text input with checkbox"
                        placeholder="Czytanie powiadomień">
                </div>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-default">Numer alarmowy</span>
                    </div>
                    <input type="text" class="form-control" aria-label="Default"
                        aria-describedby="inputGroup-sizing-default" placeholder="Wprowadź numer" id="numerAlarmowy">
                </div>
                <button class="btn" onclick="saveChanges()"><a href="#">Zapisz</a></button>
            </div>
        </div>
        <button type="submit" class="btn wroc float-left"><a href="strona-glowna.html">Wróć</a></button>
    </main>
    <script>
        var db;
        var firebaseConfig = {
            apiKey: "AIzaSyBP8Un_hWobMbOE5HgU41Cwne7L7vMTVhw",
            authDomain: "bogate-aplikacje-internetowe.firebaseapp.com",
            databaseURL: "https://bogate-aplikacje-internetowe.firebaseio.com",
            projectId: "bogate-aplikacje-internetowe",
            storageBucket: "bogate-aplikacje-internetowe.appspot.com",
            messagingSenderId: "860894210224",
            appId: "1:860894210224:web:b950180e478fe509"
        };

        // Initialize Firebase
        var app = firebase.initializeApp(firebaseConfig);
        db = firebase.firestore(app);

        var testUserMail;
        firebase.auth().onAuthStateChanged(function (user) {
            if (user) {
                testUserMail = firebase.auth().currentUser.email;
            }
            else {
                // No user is signed in.
            }
        });
        function saveChanges() {


            // Oczywiście tutaj trzeba pobierać input usera a nie zhardocodowane dane
            var alarmPrzyBezruchu = document.querySelector("#alarmPrzyBezruchu").checked;
            var powiadomienia = document.querySelector("#powiadomienia").checked;
            var czytaniePowiadomien = document.querySelector("#czytaniePowiadomien").checked;
            var numerAlarmowy = document.querySelector("#numerAlarmowy").value;


            var wskaznik = db.collection("Dziennik pacjentow Karol").doc(testUserMail).collection("Ustawienia").doc("dokument");
            wskaznik.set({
                alarmPrzyBezruchu: alarmPrzyBezruchu,
                powiadomienia: powiadomienia,
                czytaniePowiadomien: czytaniePowiadomien,
                numerAlarmowy: numerAlarmowy
            })
            // var settingsObject;
            // wskaznik.get().then(function (doc) {
            //     if (doc.exists) {
            //         settingsObject = doc.data();
            //     }
            // })
        }
    </script>
</body>

</html>